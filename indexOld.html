<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bitcoin Regret</title>
    
        <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet">
    
    
        <!-- Omni-Slider CSS -->
    <link href="https://cdn.jsdelivr.net/npm/omni-slider@1.2.1/omni-slider.css" rel="stylesheet">

       <!-- Omni-Slider JS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/omni-slider@1.2.1/omni-slider.min.js"></script>
    

    <link href="style.css" rel="stylesheet">
    
</head>
<body>
    <div class="container">
      <header class="header clearfix">
        <nav>
          <ul class="nav nav-pills float-right">
            <li class="nav-item">
              <a class="nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
          </ul>
        </nav>
        <h3 class="text-muted">Crypto Hindsight</h3>
      </header>

      <main role="main">

        <div class="jumbotron">
          <h2 class="display-3">Bitcoin Regret</h2>
          <div class="form-group">
              <form id="myForm">
                  <p>If you had invested $  <input id="dollarAmount" type="number" placeholder="50"></p>
                  <p>into bitcoin on <!--<input type="date" 
                                        id="buyDate" 
                                        min="2012-02-02" 
                                        max="2017-12-17">
                                        -->
                                        
                                        <span id="buyDate"></span></p>
                  <p>and cashed out on <!--<input type="date" 
                                        id="sellDate" 
                                        min="2012-02-02" 
                                        max="2017-12-17">-->
                                        
                                        <span id="sellDate"></span></p>
              </form>
              
              <div id="demo">
                  
              </div>
               
               <!--     forget the slider for now
               <div id="slidecontainer">
                  <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
                  <p><span id="sliderDate"></span></p>
                </div>
               
               -->
                <p>
                    you could have <span id="changeResults">made</span>
                </p>

               <h2 id="results">$<span id="finalValue"></span></h2>
                
          </div>
          <p><a class="btn btn-lg btn-success" href="#" role="button">Check Now</a></p>
        </div>

        <div class="row marketing">
        <div class="col-lg-6">
        sdfsdf
        </div>
        </div>

      </main>

      <footer class="footer">
        <p>&copy; Bitcoin Regret</p>
      </footer>

    </div> <!-- /container -->
    
    <script>
        
        
        //set event listeners on inputs
        document.getElementById('dollarAmount').addEventListener('input', setDollars);
        
        
        //document.getElementById('buyDate').addEventListener('input', setBuyDate);
        //document.getElementById('sellDate').addEventListener('input', setSellDate);
        
        
        document.getElementById('dollarAmount').addEventListener('input', function(e){
           
            let dollars = e.target.value;
            
            //console.log(convertUSD(dollars));
            
        });
        
        
        //takes dollar amount from input and converts it to BTC on given date
        
        function convertUSD(dollars){
            
            return dollars + .50;
            
            
        }
        
        
        function setDollars() {
            
            let startingDollars = document.getElementById('dollarAmount').value;
            //console.log('starting dollars: ' + startingDollars);

            
            // wait to get bitcoin price from buyDate
            
            
            let bitcoinPrice = 20;
            
            
            let numCoins = startingDollars / bitcoinPrice;
            
            
            console.log('you would be able to get ' + numCoins + ' bitcoins at a price of $' + bitcoinPrice);
            
            
        }
        
        function setBuyDate() {
            
            let buyDate = document.getElementById('buyDate').value;
            //console.log('buy date: ' + buyDate);
            
            
        }
        
        function setSellDate() {
            
            let sellDate = document.getElementById('sellDate').value;
            //console.log('sell date: ' + sellDate);
        }

        
        // checkInputsFull() - returns true if all inputs have values
        //      used to trigger the final display of dollars
        function checkInputsFull(){
            
            let dollarInput = document.getElementById('dollarAmount').value;
            let buyDate = document.getElementById('buyDate').value;
            let sellDate = document.getElementById('sellDate').value;
            
            if (dollarInput && buyDate && sellDate){
                return true; //the inputs all have values
            }
            else return false;
            
        }
        
        // displayResults -- takes final dollar amount and displays it
        
        function displayResults(finalAmount) {

            
            document.getElementById('finalValue').innerHTML = finalAmount;
        }
        
        
        function setSlider(){
            var element = document.getElementById('demo');
    
            
            var options = {
                  // options here
                isDate: true,
                overlap: false,
                min: "2012-02-02",
                max: "2017-12-17"
            };
            
            //create slider
            var mySlider = new Slider(element, options);
            
            //set starting data values
            var data = mySlider.getInfo();
            
            

            var harry = mySlider.subscribe('start', function(data) {
                // triggers when the handle is selected
                document.getElementById('buyDate').innerHTML = parseDate(data.left);
                document.getElementById('sellDate').innerHTML = parseDate(data.right);
            });

            var potter = mySlider.subscribe('moving', function(data) {
                // triggers when the handle is being moved
                document.getElementById('buyDate').innerHTML = parseDate(data.left);
                document.getElementById('sellDate').innerHTML = parseDate(data.right);
            });

            var data = mySlider.subscribe('stop', function(data) {
                // triggers when the handle is released
                document.getElementById('buyDate').innerHTML = parseDate(data.left);
                document.getElementById('sellDate').innerHTML = parseDate(data.right);
            });
            
        }
        
        setSlider();
        parseDate();
        
        function parseDate(dateString) {
            var unixDate = Date.parse(dateString) / 1000;

            var month = unixDate.getMonth();
            
            return month;
        }
        
        /**
         * Get the number of days in any particular month
         * @link https://stackoverflow.com/a/1433119/1293256
         * @param  {integer} m The month (valid: 0-11)
         * @param  {integer} y The year
         * @return {integer}   The number of days in the month
         
        var daysInMonth = function (m, y) {
            switch (m) {
                case 1 :
                    return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;
                case 8 : case 3 : case 5 : case 10 :
                    return 30;
                default :
                    return 31
            }
        };

        /**
         * Check if a date is valid
         * @link https://stackoverflow.com/a/1433119/1293256
         * @param  {[type]}  d The day
         * @param  {[type]}  m The month
         * @param  {[type]}  y The year
         * @return {Boolean}   Returns true if valid
         
        var isValidDate = function (d, m, y) {
            m = parseInt(m, 10) - 1;
            return m >= 0 && m < 12 && d > 0 && d <= daysInMonth(m, y);
        };
        */
        
        
        
    </script>
</body>
</html>